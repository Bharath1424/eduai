{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account in the EduAI application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "signUpDate": {
          "type": "string",
          "description": "Date and time the user signed up.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "signUpDate"
      ]
    },
    "Topic": {
      "title": "Topic",
      "description": "A user-created quiz topic.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the topic."
        },
        "icon": {
          "type": "string",
          "description": "The name of the lucide-react icon for the topic."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who created this topic."
        }
      },
      "required": [
        "name",
        "icon",
        "userId"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile information. Uses path-based ownership for security.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, corresponding to their Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/topics/{topicId}",
        "definition": {
          "entityName": "Topic",
          "schema": {
            "$ref": "#/backend/entities/Topic"
          },
          "description": "Stores user-created quiz topics. Each user has their own set of topics.",
          "params": [
            {
              "name": "userId",
              "description": "The UID of the user who owns these topics."
            },
            {
              "name": "topicId",
              "description": "The unique identifier for the topic."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support user authentication and user data storage for the EduAI application. The core principle is Authorization Independence, achieved by storing all necessary authorization data directly within the documents and avoiding hierarchical `get()` calls in security rules. The structure uses path-based ownership for user data, placing all user-specific data under the `/users/{userId}` path, which is simple and secure. QAPs (Rules are not Filters) is achieved because all documents within a collection share the same security requirements, so `list` operations will only return the documents that the user has access to."
  }
}
